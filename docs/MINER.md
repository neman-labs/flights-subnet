# Miner Guide

- [Miner Guide](#miner-guide)
  - [Introduction](#introduction)
  - [Installation](#installation)
    - [Prerequisites](#prerequisites)
      - [OS dependencies](#os-dependencies)
      - [PM2](#pm2)
    - [Clone the repository](#clone-the-repository)
    - [Install dependencies](#install-dependencies)
    - [Environment Variables](#environment-variables)
    - [Running](#running)
  - [Monitoring](#monitoring)
  - [Troubleshooting | Support](#troubleshooting--support)

## Introduction

The Miner is responsible for solving the challenges generated by the Validator. The Miner will receive the challenges from the Validator, solve them, and submit the solutions back to the Validator. The Miner will be rewarded based on the number of challenges solved and the quality of the solutions.

We provided a default (baseline) simple solution for the miner to start with. It uses LLM to generate the solution.
Feel free to develop and implement your own solution. Better solutions earn greater rewards over time.

## Installation

### Prerequisites

- Ubuntu 20.04
- Python 3.10 [see](#os-dependencies)
- PM2 [see](#pm2)
- No GPU required

#### OS dependencies

```bash
sudo apt-get update
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt-get install -y python3.10 python3.10-venv curl gcc pkg-config make git npm
```

#### PM2

Install [PM2](https://pm2.io/docs/runtime/guide/installation/):

```bash
npm install pm2 -g && pm2 update
```

### Clone the repository

Clone the repository and navigate to the folder.

```bash
git clone https://github.com/neman-labs/flights-subnet.git && cd flights-subnet
```

### Install dependencies

Install the necessary dependencies:

```bash
bash scripts/install_env.sh
```

This step included into miner [running](#running) script as well. You can use this step manually to ensure that all dependencies are installed and no errors occur.

### Environment Variables

First of all, create and configute `miner.env` file.
Provide all necessary environment variables as follows:

Bittensor Configuration:

- `NETUID` - [Required] - Bittensor subnet ID.
- `SUBTENSOR_NETWORK` - [Required] - Bittensor network name. Options: `finney`, `test`, `local`.
- `SUBTENSOR_CHAIN_ENDPOINT` - [Optional] - Bittensor chain endpoint: `wss://entrypoint-finney.opentensor.ai`, `wss://test.finney.opentensor.ai`, `ws://127.0.0.1:9945`.

Wallet Configuration:

- `WALLET_NAME` - [Required] - Coldkey name.
- `WALLET_HOTKEY` - [Required] - Hotkey name.

Blacklist Configuration:

- `BLACKLIST_FORCE_VALIDATOR_PERMIT` - Optional, default False. Force validator permit.
- `BLACKLIST_VALIDATOR_MIN_STAKE` - Optional, default Validator min stake.

Example (look at `miner.env.example` as well):

```bash
NETUID=
WALLET_NAME=miner-coldkey
WALLET_HOTKEY=miner-hotkey
SUBTENSOR_NETWORK=finney
SUBTENSOR_CHAIN_ENDPOINT=wss://entrypoint-finney.opentensor.ai

AXON_PORT=8091

BLACKLIST_FORCE_VALIDATOR_PERMIT=false
BLACKLIST_VALIDATOR_MIN_STAKE=1000
```

### Running

You can run your miner with `start_miner.sh`:

```bash
bash scripts/start_miner.sh 
```

## Monitoring

You can monitor your miner with PM2:

```bash
pm2 monit
```

or check the logs:

```bash
pm2 logs sn-finney-miner-hotkey
```

## Troubleshooting | Support

- **Logs**:
  - Please see the logs for more details using the following command.

  ```bash
  pm2 logs sn-finney-miner-hotkey
  ```

- **Common Issues**:
  - Missing environment variables.
  - Connectivity problems.
  - Incorrect wallet configuration | Small wallet balance.

- **Contact Support**:
- [Discord](https://discord.com/channels/799672011265015819/799672011814862902) 
